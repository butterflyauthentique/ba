"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4587],{837:(e,t,a)=>{a.d(t,{A:()=>p});var r=a(5155),s=a(2115),o=a(9869),c=a(1154),i=a(646),n=a(5339),l=a(4416),d=a(8564),u=a(2525),g=a(7213),m=a(3243),h=a(3568);function p(e){let{productId:t="temp",category:a="general",userId:p,onImagesUploaded:x,onImagesRemoved:y,maxImages:w=10,allowMultiple:f=!0,showThumbnails:I=!0,className:b=""}=e,[N,v]=(0,s.useState)([]),[j,A]=(0,s.useState)([]),[D,E]=(0,s.useState)(!1),[M,T]=(0,s.useState)(null),S=(0,s.useRef)(null),U=(0,s.useCallback)(e=>{if(!e)return;let t=Array.from(e).filter(e=>m.Ve.ALLOWED_TYPES.includes(e.type)?!(e.size>m.Ve.MAX_FILE_SIZE)||(h.Ay.error("".concat(e.name," is too large (max ").concat(m.Ve.MAX_FILE_SIZE/1048576,"MB)")),!1):(h.Ay.error("".concat(e.name," is not a valid image type")),!1));if(0===t.length)return;if(j.length+N.length+t.length>w)return void h.Ay.error("Maximum ".concat(w," images allowed"));let a=t.map(e=>({id:"".concat(Date.now(),"_").concat(Math.random()),file:e,progress:0,status:"uploading"}));v(e=>[...e,...a]),t.forEach((e,t)=>{P(e,a[t].id)})},[j.length,N.length,w]),P=async(e,r)=>{try{let s=await m.ImageUploadService.uploadProductImage(e,t,a,p,{alt:e.name,isFeatured:0===j.length&&null===M});v(e=>e.map(e=>e.id===r?{...e,progress:100,status:"success"}:e)),A(e=>{let t=[...e,s];return 1===t.length&&T(s.id),t}),x([s]),h.Ay.success("".concat(e.name," uploaded successfully")),setTimeout(()=>{v(e=>e.filter(e=>e.id!==r))},1e3)}catch(t){console.error("Upload error:",t),v(e=>e.map(e=>e.id===r?{...e,status:"error",error:t instanceof Error?t.message:"Upload failed"}:e)),h.Ay.error("Failed to upload ".concat(e.name))}},C=(0,s.useCallback)(e=>{e.preventDefault(),E(!0)},[]),_=(0,s.useCallback)(e=>{e.preventDefault(),E(!1)},[]),L=(0,s.useCallback)(e=>{e.preventDefault(),E(!1),U(e.dataTransfer.files)},[U]),k=async e=>{let t=j.find(t=>t.id===e);if(t)try{if(await m.ImageUploadService.deleteImage(t.url),A(t=>t.filter(t=>t.id!==e)),M===e){let t=j.filter(t=>t.id!==e);T(t.length>0?t[0].id:null)}y([e]),h.Ay.success("Image removed successfully")}catch(e){console.error("Error removing image:",e),h.Ay.error("Failed to remove image")}};return(0,r.jsxs)("div",{className:"space-y-4 ".concat(b),children:[(0,r.jsxs)("div",{className:"\n          relative border-2 border-dashed rounded-lg p-6 text-center transition-colors\n          ".concat(D?"border-red-400 bg-red-50":"border-gray-300 hover:border-gray-400","\n        "),onDragOver:C,onDragLeave:_,onDrop:L,children:[(0,r.jsx)("input",{ref:S,type:"file",multiple:f,accept:m.Ve.ALLOWED_TYPES.join(","),onChange:e=>U(e.target.files),className:"hidden"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Drag and drop images here, or"," ",(0,r.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=S.current)?void 0:e.click()},className:"text-red-600 hover:text-red-700 font-medium",children:"browse files"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Supports JPEG, PNG, WebP, AVIF up to ",m.Ve.MAX_FILE_SIZE/1048576,"MB"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[j.length,"/",w," images uploaded"]})]})]})]}),N.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Uploading..."}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:N.map(e=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center",children:["uploading"===e.status&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.A,{className:"h-8 w-8 text-gray-400 animate-spin mx-auto mb-2"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.progress,"%"]})]}),"success"===e.status&&(0,r.jsx)(i.A,{className:"h-8 w-8 text-green-500"}),"error"===e.status&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.A,{className:"h-8 w-8 text-red-500 mx-auto mb-1"}),(0,r.jsx)("p",{className:"text-xs text-red-500",children:"Failed"})]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void v(e=>e.filter(e=>e.id!==t))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(l.A,{className:"h-3 w-3"})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1 truncate",children:e.file.name})]},e.id))})]}),j.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Uploaded Images"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:j.map((e,t)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:[(0,r.jsx)("img",{src:I&&e.thumbnailUrl?e.thumbnailUrl:e.url,alt:e.alt||e.originalName,className:"w-full h-full object-cover",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik03NSA0MEM2My40MDQ2IDQwIDU0IDQ5LjQwNDYgNTQgNjFDNTQgNzIuNTk1NCA2My40MDQ2IDgyIDc1IDgyQzg2LjU5NTQgODIgOTYgNzIuNTk1NCA5NiA2MUM5NiA0OS40MDQ2IDg2LjU5NTQgNDAgNzUgNDBaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0yMCAxMjBDMjAgMTE4Ljg5NSAyMC44OTU0IDExOCAyMiAxMThIMTI4QzEyOS4xMDUgMTE4IDEzMCAxMTguODk1IDEzMCAxMjBDMTMwIDEyMS4xMDUgMTI5LjEwNSAxMjIgMTI4IDEyMkgyMkMyMC44OTU0IDEyMiAyMCAxMjEuMTA1IDIwIDEyMFoiIGZpbGw9IiM5QjlCQTAiLz4KPC9zdmc+"}}),M===e.id&&(0,r.jsx)("div",{className:"absolute top-1 left-1 bg-yellow-500 text-white text-xs px-1 rounded",children:"Featured"}),(0,r.jsx)("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded",children:t+1})]}),(0,r.jsxs)("div",{className:"absolute top-1 right-1 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{T(e.id)},className:"p-1 rounded-full ".concat(M===e.id?"bg-yellow-500 text-white":"bg-white text-gray-600 hover:bg-yellow-50"),title:"Set as featured",children:(0,r.jsx)(d.A,{className:"h-3 w-3"})}),(0,r.jsx)("button",{type:"button",onClick:()=>k(e.id),className:"bg-red-500 text-white p-1 rounded-full hover:bg-red-600",title:"Remove image",children:(0,r.jsx)(u.A,{className:"h-3 w-3"})})]}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.originalName}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[Math.round(e.fileSize/1024),"KB • ",e.width,"\xd7",e.height]})]})]},e.id))})]}),0===j.length&&0===N.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(g.A,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),(0,r.jsx)("p",{className:"text-sm",children:"No images uploaded yet"}),(0,r.jsx)("p",{className:"text-xs",children:"Upload images to showcase your product"})]})]})}},3243:(e,t,a)=>{a.d(t,{ImageUploadService:()=>i,Ve:()=>o});var r=a(7505),s=a(6104);let o={MAX_FILE_SIZE:5242880,ALLOWED_TYPES:["image/jpeg","image/png","image/webp","image/avif"],QUALITY:.8,MAX_WIDTH:1920,MAX_HEIGHT:1920,THUMBNAIL_WIDTH:400,THUMBNAIL_HEIGHT:400},c={PRODUCTS:"products",CATEGORIES:"categories",BLOG:"blog",USERS:"users"};class i{static async uploadProductImage(e,t,a,o,i){try{let n;this.validateFile(e);let l=Date.now(),d=e.name.split(".").pop(),u="".concat(t,"_").concat(l,".").concat(d),g=(0,r.KR)(s.IG,"".concat(c.PRODUCTS,"/").concat(a,"/").concat(t,"/originals/").concat(u)),m=(0,r.KR)(s.IG,"".concat(c.PRODUCTS,"/").concat(a,"/").concat(t,"/thumbnails/").concat(u)),h=await (0,r.D)(g,e),p=await (0,r.qk)(h.ref),x=await this.getImageDimensions(e);try{let t=await this.createThumbnail(e),a=await (0,r.D)(m,t);n=await (0,r.qk)(a.ref)}catch(e){console.warn("Failed to create thumbnail, continuing without it:",e)}return{id:"".concat(t,"_").concat(l),originalName:e.name,fileName:u,fileSize:e.size,mimeType:e.type,width:x.width,height:x.height,url:p,thumbnailUrl:n,uploadedAt:new Date,uploadedBy:o,alt:(null==i?void 0:i.alt)||e.name,caption:null==i?void 0:i.caption}}catch(e){if(console.error("Error uploading product image:",e),e instanceof Error)if(e.message.includes("storage/unauthorized"))throw Error("Unauthorized: Please log in to upload images");else if(e.message.includes("storage/quota-exceeded"))throw Error("Storage quota exceeded. Please contact support.");else if(e.message.includes("storage/retry-limit-exceeded"))throw Error("Upload failed. Please try again.");else throw Error("Upload failed: ".concat(e.message));throw Error("Failed to upload image. Please try again.")}}static async uploadProductImages(e,t,a,r,s){let o=e.map((e,o)=>{var c,i;return this.uploadProductImage(e,t,a,r,{alt:null==s||null==(c=s.altTexts)?void 0:c[o],caption:null==s||null==(i=s.captions)?void 0:i[o],isFeatured:o===(null==s?void 0:s.featuredIndex)})}),c=await Promise.all(o);return{productId:t,category:a,images:c.map(e=>({original:e,thumbnail:e.thumbnailUrl?{...e,url:e.thumbnailUrl}:void 0})),featuredImage:(null==s?void 0:s.featuredIndex)!==void 0?c[s.featuredIndex]:c[0]}}static async uploadCategoryImage(e,t,a){try{this.validateFile(e);let o=Date.now(),i=e.name.split(".").pop(),n="".concat(t,"_").concat(o,".").concat(i),l=(0,r.KR)(s.IG,"".concat(c.CATEGORIES,"/").concat(t,"/").concat(n)),d=await (0,r.D)(l,e),u=await (0,r.qk)(d.ref),g=await this.getImageDimensions(e);return{id:"".concat(t,"_").concat(o),originalName:e.name,fileName:n,fileSize:e.size,mimeType:e.type,width:g.width,height:g.height,url:u,uploadedAt:new Date,uploadedBy:a,alt:"".concat(t," category image")}}catch(e){throw console.error("Error uploading category image:",e),Error("Failed to upload category image")}}static async uploadBlogImage(e,t,a){try{this.validateFile(e);let o=Date.now(),i=e.name.split(".").pop(),n="".concat(t,"_").concat(o,".").concat(i),l=(0,r.KR)(s.IG,"".concat(c.BLOG,"/").concat(t,"/").concat(n)),d=await (0,r.D)(l,e),u=await (0,r.qk)(d.ref),g=await this.getImageDimensions(e);return{id:"".concat(t,"_").concat(o),originalName:e.name,fileName:n,fileSize:e.size,mimeType:e.type,width:g.width,height:g.height,url:u,uploadedAt:new Date,uploadedBy:a,alt:e.name}}catch(e){throw console.error("Error uploading blog image:",e),Error("Failed to upload blog image")}}static async uploadUserAvatar(e,t){try{this.validateFile(e);let a=Date.now(),o=e.name.split(".").pop(),i="avatar_".concat(a,".").concat(o),n=(0,r.KR)(s.IG,"".concat(c.USERS,"/").concat(t,"/avatar/").concat(i)),l=await (0,r.D)(n,e),d=await (0,r.qk)(l.ref),u=await this.getImageDimensions(e);return{id:"avatar_".concat(t,"_").concat(a),originalName:e.name,fileName:i,fileSize:e.size,mimeType:e.type,width:u.width,height:u.height,url:d,uploadedAt:new Date,uploadedBy:t,alt:"User avatar"}}catch(e){throw console.error("Error uploading user avatar:",e),Error("Failed to upload avatar")}}static async deleteImage(e){try{let t=(0,r.KR)(s.IG,e);await (0,r.XR)(t)}catch(e){throw console.error("Error deleting image:",e),Error("Failed to delete image")}}static extractStoragePathFromUrl(e){try{if(!e||!e.includes("firebaseapp.com")||!e.includes("o/"))return null;let t=e.split("?")[0].match(/o\/([^?]+)/);if(t)return decodeURIComponent(t[1]);return null}catch(e){return console.error("Error extracting storage path:",e),null}}static async deleteImagesFromUrls(e){let t=e.map(e=>this.extractStoragePathFromUrl(e)).filter(e=>null!==e).map(e=>this.deleteImage(e));t.length>0&&await Promise.allSettled(t)}static async deleteProductImages(e,t){try{let a=(0,r.KR)(s.IG,"".concat(c.PRODUCTS,"/").concat(t,"/").concat(e)),o=(await (0,r._w)(a)).items.map(e=>(0,r.XR)(e));await Promise.all(o)}catch(e){throw console.error("Error deleting product images:",e),Error("Failed to delete product images")}}static getImageDimensions(e){return new Promise((t,a)=>{let r=new Image;r.onload=()=>{t({width:r.width,height:r.height})},r.onerror=a,r.src=URL.createObjectURL(e)})}static async createThumbnail(e){return new Promise((t,a)=>{let r=document.createElement("canvas"),s=r.getContext("2d"),c=new Image;c.onload=()=>{let{width:e,height:i}=this.calculateThumbnailDimensions(c.width,c.height,o.THUMBNAIL_WIDTH,o.THUMBNAIL_HEIGHT);r.width=e,r.height=i,null==s||s.drawImage(c,0,0,e,i),r.toBlob(e=>{e?t(e):a(Error("Failed to create thumbnail"))},"image/jpeg",o.QUALITY)},c.onerror=a,c.src=URL.createObjectURL(e)})}static calculateThumbnailDimensions(e,t,a,r){let s=Math.min(a/e,r/t);return{width:Math.round(e*s),height:Math.round(t*s)}}static validateFile(e){if(e.size>o.MAX_FILE_SIZE)throw Error("File size must be less than ".concat(o.MAX_FILE_SIZE/1048576,"MB"));if(!o.ALLOWED_TYPES.includes(e.type))throw Error("Invalid file type. Please upload JPEG, PNG, WebP, or AVIF images.")}static generateOptimizedUrl(e,t,a){return"".concat(e,"?w=").concat(t,"&h=").concat(a,"&q=").concat(o.QUALITY)}static getProductImagePath(e,t,a){return"".concat(c.PRODUCTS,"/").concat(t,"/").concat(e,"/originals/").concat(a)}static getProductThumbnailPath(e,t,a){return"".concat(c.PRODUCTS,"/").concat(t,"/").concat(e,"/thumbnails/").concat(a)}}},4463:(e,t,a)=>{a.d(t,{A:()=>b});var r=a(5155),s=a(2115),o=a(6874),c=a.n(o),i=a(5695),n=a(3783),l=a(7108),d=a(7809),u=a(7580),g=a(2713),m=a(5525),h=a(381),p=a(4416),x=a(4783),y=a(7340),w=a(4835),f=a(3568);let I=[{name:"Dashboard",href:"/admin",icon:n.A,description:"Overview and analytics"},{name:"Products",href:"/admin/products",icon:l.A,description:"Manage product catalog"},{name:"Orders",href:"/admin/orders",icon:d.A,description:"Process customer orders"},{name:"Customers",href:"/admin/customers",icon:u.A,description:"Customer management"},{name:"Analytics",href:"/admin/analytics",icon:g.A,description:"Sales and performance"},{name:"Admins",href:"/admin/admins",icon:m.A,description:"Manage admin access"},{name:"Settings",href:"/admin/settings",icon:h.A,description:"Admin configuration"}];function b(){let e=(0,i.usePathname)(),[t,a]=(0,s.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,r.jsx)("button",{onClick:()=>a(!t),className:"p-2 rounded-md bg-white shadow-lg border border-gray-200",children:t?(0,r.jsx)(p.A,{className:"h-6 w-6 text-gray-600"}):(0,r.jsx)(x.A,{className:"h-6 w-6 text-gray-600"})})}),(0,r.jsx)("div",{className:"\n        fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg border-r border-gray-200 transform transition-transform duration-300 ease-in-out\n        ".concat(t?"translate-x-0":"-translate-x-full lg:translate-x-0","\n      "),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"BA"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-secondary text-lg font-bold text-gray-900",children:"Admin Panel"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Butterfly Authentique"})]})]})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:I.map(t=>{if("Admins"===t.name)return null;let s=e===t.href;return(0,r.jsxs)(c(),{href:t.href,className:"\n                    flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors group\n                    ".concat(s?"bg-red-50 text-red-700 border-r-2 border-red-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900","\n                  "),onClick:()=>a(!1),children:[(0,r.jsx)(t.icon,{className:"h-5 w-5 ".concat(s?"text-red-600":"text-gray-400 group-hover:text-gray-600")}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("span",{className:"font-medium",children:t.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:t.description})]})]},t.name)})}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[(0,r.jsxs)(c(),{href:"/",className:"flex items-center space-x-3 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors",onClick:()=>a(!1),children:[(0,r.jsx)(y.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Back to Site"})]}),(0,r.jsxs)("button",{onClick:()=>{f.Ay.success("Logout functionality moved to Firebase Auth")},className:"w-full flex items-center space-x-3 px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[(0,r.jsx)(w.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Logout"})]})]})]})}),t&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>a(!1)})]})}},6104:(e,t,a)=>{a.d(t,{IG:()=>g,_f:()=>m,db:()=>u,j2:()=>d,jU:()=>h});var r=a(3915),s=a(5404),o=a(5317),c=a(7505),i=a(9434);let n={apiKey:"AIzaSyBTZwEHiG_KmjmZY1wXW3Xane8F4pUqq_E",authDomain:"butterflyauthentique33.firebaseapp.com",projectId:"butterflyauthentique33",storageBucket:"butterflyauthentique33.firebasestorage.app",messagingSenderId:"147808797895",appId:"1:147808797895:web:5013c06442c7063f796ae2",measurementId:a(9509).env.NEXT_PUBLIC_GA_MEASUREMENT_ID},l=0===(0,r.Dk)().length?(0,r.Wp)(n):(0,r.Dk)()[0],d=(0,s.xI)(l),u=(0,o.aU)(l),g=(0,c.c7)(l);console.log("Firebase Config:",{projectId:n.projectId,authDomain:n.authDomain,storageBucket:n.storageBucket});let m={products:(0,o.rJ)(u,"products"),categories:(0,o.rJ)(u,"categories"),users:(0,o.rJ)(u,"users"),orders:(0,o.rJ)(u,"orders"),cart:(0,o.rJ)(u,"cart"),blog:(0,o.rJ)(u,"blog"),reviews:(0,o.rJ)(u,"reviews"),addresses:(0,o.rJ)(u,"addresses"),settings:(0,o.rJ)(u,"settings"),admins:(0,o.rJ)(u,"admins")},h={async create(e){try{console.log("\uD83D\uDE80 Creating new product...");let t=(0,o.H9)((0,o.rJ)(u,"temp")).id;console.log("Generated product ID:",t);let a=e.slug||(0,i.SV)(e.name,t);console.log("Generated slug:",a);let r={...e,id:t,slug:a,viewCount:0,purchaseCount:0,rating:0,reviews:0,createdAt:o.Dc.now(),updatedAt:o.Dc.now()};return console.log("\uD83D\uDCBE Saving to Firestore..."),await (0,o.setDoc)((0,o.H9)(m.products,t),r),console.log("✅ Product created successfully!"),r}catch(e){throw console.error("❌ Error creating product:",e),e}},async getById(e){try{console.log("\uD83D\uDD0D Getting product by ID or slug:",e);let t=(0,o.H9)(m.products,e),a=await (0,o.x7)(t);if(a.exists())return console.log("✅ Product found by ID"),{id:a.id,...a.data()};console.log("\uD83D\uDD0D Product not found by ID, searching by slug...");let r=(0,o.P)(m.products,(0,o._M)("slug","==",e),(0,o.AB)(1)),s=await (0,o.GG)(r);if(!s.empty){let e=s.docs[0];return console.log("✅ Product found by slug"),{id:e.id,...e.data()}}return console.log("❌ Product not found by ID or slug"),null}catch(e){return console.error("❌ Error getting product:",e),null}},async getAll(){try{console.log("\uD83D\uDD0D Getting all products...");let e=(0,o.P)(m.products,(0,o.My)("createdAt","desc")),t=await (0,o.GG)(e);return console.log("✅ Found ".concat(t.docs.length," products")),t.docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("❌ Error getting products:",e),[]}},async update(e,t){try{console.log("\uD83D\uDD04 Updating product:",e);let a=(0,o.H9)(m.products,e);await (0,o.setDoc)(a,{...t,updatedAt:o.Dc.now()},{merge:!0}),console.log("✅ Product updated successfully")}catch(e){throw console.error("❌ Error updating product:",e),e}},async delete(e){try{console.log("\uD83D\uDDD1️ Deleting product:",e),await (0,o.setDoc)((0,o.H9)(m.products,e),{}),console.log("✅ Product deleted successfully")}catch(e){throw console.error("❌ Error deleting product:",e),e}}}},9434:(e,t,a)=>{function r(e,t){let a=e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"").substring(0,100),r=t.substring(0,8);return"".concat(a,"-").concat(r)}function s(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function o(e){return/^[6-9]\d{9}$/.test(e.replace(/\D/g,""))}a.d(t,{B9:()=>s,BH:()=>o,SV:()=>r,k0:()=>c});let c=e=>new Promise((t,a)=>{if(document.querySelector('script[src="'.concat(e,'"]')))return void t();let r=document.createElement("script");r.src=e,r.async=!0,r.onload=()=>t(),r.onerror=()=>a(Error("Failed to load script: ".concat(e))),document.head.appendChild(r)})}}]);