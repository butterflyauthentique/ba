(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1770],{488:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},940:(e,t,s)=>{"use strict";s.d(t,{default:()=>P});var a=s(5155),r=s(2115),i=s(5695),l=s(6766),c=s(6874),n=s.n(c),o=s(7108),d=s(9946);let m=(0,d.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),h=(0,d.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var u=s(1007),g=s(8564),x=s(7712),y=s(4616),p=s(6151),v=s(1976);let f=(0,d.A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var w=s(488);let j=(0,d.A)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);var b=s(5684),N=s(1264),k=s(5196);let A=(0,d.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var C=s(9799),I=s(5525);let M=(0,d.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var S=s(2730),E=s(1060),F=s(3999),q=s(3568);function P(e){var t,s,c;let{product:d}=e;(0,i.useRouter)();let{addToCart:P}=(0,S.e)(),{user:z}=(0,F.A)(),[L,_]=(0,r.useState)(null),[T,W]=(0,r.useState)(1),[R,O]=(0,r.useState)(0),[G,H]=(0,r.useState)(!1),[D,V]=(0,r.useState)(!1),[U,J]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=e=>{let t=e.target;D&&!t.closest(".share-menu-container")&&V(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[D]),(0,r.useEffect)(()=>{(async()=>{if(!z)return H(!1);try{let e=await E.F.isInWishlist(z.id,d.id);H(e)}catch(e){console.error("Error checking wishlist status:",e),H(!1)}})()},[z,d.id]),(0,r.useEffect)(()=>{d.variants&&d.variants.length>0&&_({...d.variants[0],inStock:!0})},[d]);let B=async()=>{if(!z)return void q.Ay.error("Please log in to add items to wishlist");try{let e=await E.F.toggleWishlistItem(z.id,d);H(e.added),q.Ay.success(e.added?"Added to wishlist!":"Removed from wishlist")}catch(e){console.error("Error toggling wishlist:",e),q.Ay.error("Failed to update wishlist")}},Q=e=>{W(Math.max(1,T+e))},Z=window.location.href,K=d.name,Y=d.metaDescription||d.description||"Check out this beautiful ".concat(d.name," from Butterfly Authentique!");"string"==typeof d.images[0]?d.images[0]:null==(t=d.images[0])||t.url;let X=async()=>{try{await navigator.clipboard.writeText(Z),J(!0),q.Ay.success("Link copied to clipboard!"),setTimeout(()=>J(!1),2e3)}catch(e){q.Ay.error("Failed to copy link")}},$=(null==L?void 0:L.price)||d.price,ee=(null==L?void 0:L.comparePrice)||d.comparePrice,et=ee&&ee>$,es=et?Math.round((ee-$)/ee*100):0,ea={"@context":"https://schema.org","@type":"Product",name:d.name,description:d.description,image:"string"==typeof d.images[0]?d.images[0]:null==(s=d.images[0])?void 0:s.url,brand:{"@type":"Brand",name:"Butterfly Authentique"},offers:{"@type":"Offer",price:$,priceCurrency:"INR",availability:d.stock>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",url:window.location.href,seller:{"@type":"Organization",name:"Butterfly Authentique"}},aggregateRating:{"@type":"AggregateRating",ratingValue:d.rating,reviewCount:d.reviews},category:d.category,material:d.materials,artist:d.artist,sku:d.sku,mpn:d.id};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(ea)}}),(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,a.jsx)(n(),{href:"/",className:"hover:text-red-600 transition-colors",children:"Home"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)(n(),{href:"/shop",className:"hover:text-red-600 transition-colors",children:"Shop"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)(n(),{href:"/shop?category=".concat(d.category.toLowerCase()),className:"hover:text-red-600 transition-colors",children:d.category}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium truncate",children:d.name})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"relative bg-white rounded-lg overflow-hidden shadow-sm border border-gray-200",children:(0,a.jsx)("div",{className:"aspect-square relative",children:d.images&&d.images.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{src:"string"==typeof d.images[R]?d.images[R]:(null==(c=d.images[R])?void 0:c.url)||"",alt:d.name,fill:!0,className:"object-contain",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 40vw",priority:!0,onError:e=>{let t=e.target;if(d.images.length>1){let e=(d.images.findIndex(e=>("string"==typeof e?e:null==e?void 0:e.url)===t.src)+1)%d.images.length,s=d.images[e];"string"==typeof s||null==s||s.url,t.src="string"==typeof s?s:null==s?void 0:s.url}else{var s;t.style.display="none";let e=null==(s=t.parentElement)?void 0:s.querySelector(".main-image-placeholder");e&&(e.style.display="flex")}}}),(0,a.jsx)("div",{className:"main-image-placeholder absolute inset-0 hidden items-center justify-center bg-gray-100",children:(0,a.jsx)(o.A,{className:"w-16 h-16 text-gray-400"})}),d.images.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{d.images.length>1&&O(e=>0===e?d.images.length-1:e-1)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-2 shadow-lg transition-colors z-10","aria-label":"Previous image",children:(0,a.jsx)(m,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>{d.images.length>1&&O(e=>e===d.images.length-1?0:e+1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-2 shadow-lg transition-colors z-10","aria-label":"Next image",children:(0,a.jsx)(h,{className:"w-5 h-5"})})]}),d.images.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/60 text-white px-3 py-1 rounded-full text-sm z-10",children:[R+1," / ",d.images.length]})]}):(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,a.jsx)(o.A,{className:"w-16 h-16 text-gray-400"})})})}),d.images&&d.images.length>1&&(0,a.jsx)("div",{className:"grid grid-cols-5 gap-3",children:d.images.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>O(t),className:"relative aspect-square rounded-md overflow-hidden border-2 transition-all duration-200 bg-white ".concat(R===t?"border-red-600 shadow-md ring-2 ring-red-100":"border-gray-200 hover:border-gray-300 hover:shadow-sm"),"aria-label":"View image ".concat(t+1," of ").concat(d.images.length),children:[(0,a.jsx)(l.default,{src:"string"==typeof e?e:null==e?void 0:e.url,alt:"".concat(d.name," - Image ").concat(t+1),fill:!0,className:"object-cover",sizes:"(max-width: 640px) 20vw, (max-width: 1024px) 15vw, 10vw",onError:e=>{var t;let s=e.target;s.style.display="none";let a=null==(t=s.parentElement)?void 0:t.querySelector(".thumb-placeholder");a&&(a.style.display="flex")}}),(0,a.jsx)("div",{className:"thumb-placeholder absolute inset-0 hidden items-center justify-center bg-gray-100",children:(0,a.jsx)(o.A,{className:"w-6 h-6 text-gray-400"})})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-6 lg:sticky lg:top-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-red-600 uppercase tracking-wider",children:d.category}),d.badges&&d.badges.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:e},t))]}),(0,a.jsx)("h1",{className:"font-secondary text-3xl font-bold text-gray-900",children:d.name}),d.artist&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(u.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["By ",d.artist]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(g.A,{className:"w-5 h-5 ".concat(t<Math.floor(d.rating||0)?"text-yellow-400 fill-current":"text-gray-300")},t))}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:d.rating}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",d.reviews," reviews)"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["₹",$.toLocaleString()]}),et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-xl text-gray-500 line-through",children:["₹",ee.toLocaleString()]}),(0,a.jsxs)("span",{className:"px-2 py-1 text-sm font-medium bg-red-100 text-red-800 rounded-full",children:[es,"% OFF"]})]})]}),d.sku&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",d.sku]})]}),d.variants&&d.variants.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Option"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:d.variants.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>{_({...e,inStock:!0}),W(1)},className:"p-3 border-2 rounded-lg text-left transition-colors ".concat((null==L?void 0:L.name)===e.name?"border-red-600 bg-red-50":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["₹",e.price.toLocaleString()]}),("inStock"in e?!1===e.inStock:0===e.stock)&&(0,a.jsx)("div",{className:"text-xs text-red-600",children:"Out of Stock"})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quantity"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>Q(-1),className:"w-10 h-10 border border-gray-300 rounded-lg flex items-center justify-center hover:bg-gray-50",children:(0,a.jsx)(x.A,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-16 text-center font-medium",children:T}),(0,a.jsx)("button",{onClick:()=>Q(1),className:"w-10 h-10 border border-gray-300 rounded-lg flex items-center justify-center hover:bg-gray-50",children:(0,a.jsx)(y.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{var e,t,s;let a=(null==L?void 0:L.name)||"default";P({productId:d.id,variantId:"default"!==a?a:void 0,quantity:T,price:(null==L?void 0:L.price)||d.price,name:d.name,image:"string"==typeof(null==(e=d.images)?void 0:e[0])?d.images[0]:(null==(s=d.images)||null==(t=s[0])?void 0:t.url)||""}),q.Ay.success("Added to cart!")},disabled:0===d.stock,className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)(p.A,{className:"w-5 h-5 mr-2 inline"}),"Add to Cart"]}),(0,a.jsx)("button",{onClick:B,className:"w-12 h-12 border border-gray-300 rounded-lg flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,a.jsx)(v.A,{className:"w-5 h-5 ".concat(G?"text-red-600 fill-current":"text-gray-600")})}),(0,a.jsxs)("div",{className:"relative share-menu-container",children:[(0,a.jsx)("button",{onClick:()=>V(!D),className:"w-12 h-12 border border-gray-300 rounded-lg flex items-center justify-center hover:bg-gray-50 transition-colors","aria-label":"Share product",children:(0,a.jsx)(f,{className:"w-5 h-5 text-gray-600"})}),D&&(0,a.jsx)("div",{className:"absolute right-0 top-14 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Share this product"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>{let e="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(Z));window.open(e,"_blank","width=600,height=400"),V(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Share on Facebook"})]}),(0,a.jsxs)("button",{onClick:()=>{let e="".concat(K," - ").concat(Y.substring(0,100),"..."),t="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(e),"&url=").concat(encodeURIComponent(Z));window.open(t,"_blank","width=600,height=400"),V(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[(0,a.jsx)(j,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Share on Twitter"})]}),(0,a.jsxs)("button",{onClick:()=>{X(),q.Ay.success("Link copied! You can now paste it in your Instagram story or post."),V(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[(0,a.jsx)(b.A,{className:"w-5 h-5 text-pink-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Share on Instagram"})]}),(0,a.jsxs)("button",{onClick:()=>{let e="".concat(K," - ").concat(Y.substring(0,100),"...\n\nCheck it out: ").concat(Z),t="https://wa.me/?text=".concat(encodeURIComponent(e));window.open(t,"_blank"),V(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:"W"})}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Share on WhatsApp"})]}),(0,a.jsxs)("button",{onClick:()=>{let e="Check out this beautiful ".concat(d.name),t="I found this amazing product and thought you might like it!\n\n".concat(K,"\n").concat(Y,"\n\nView it here: ").concat(Z),s="mailto:?subject=".concat(encodeURIComponent(e),"&body=").concat(encodeURIComponent(t));window.open(s),V(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Share via Email"})]}),(0,a.jsxs)("button",{onClick:X,className:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-gray-50 rounded-md transition-colors",children:[U?(0,a.jsx)(k.A,{className:"w-5 h-5 text-green-600"}):(0,a.jsx)(A,{className:"w-5 h-5 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:U?"Copied!":"Copy link"})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Details"}),d.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:d.description})]}),d.materials&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Materials"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.materials})]}),d.dimensions&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Dimensions"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.dimensions})]}),d.weight&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Weight"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.weight})]}),d.careInstructions&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Care Instructions"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.careInstructions})]}),d.warranty&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Warranty"}),(0,a.jsx)("p",{className:"text-gray-600",children:d.warranty})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(C.A,{className:"w-5 h-5 text-red-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:"Free Shipping"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"On orders over ₹2000"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(I.A,{className:"w-5 h-5 text-red-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:"Secure Payment"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"100% secure checkout"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(M,{className:"w-5 h-5 text-red-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:"Easy Returns"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"30 day return policy"})]})]})]})})]})]})})]})}},1007:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1060:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var a=s(5317),r=s(6104);class i{static async addToWishlist(e,t){try{var s;let i={userId:e,productId:t.id,productName:t.name,productImage:"string"==typeof t.images[0]?t.images[0]:(null==(s=t.images[0])?void 0:s.url)||"",productPrice:t.price,productSlug:t.slug,productCategory:t.category,addedAt:(0,a.serverTimestamp)(),originalPrice:t.price,lastPriceCheck:(0,a.serverTimestamp)(),priority:"medium",isPublic:!1};return(await (0,a.gS)((0,a.rJ)(r.db,this.collection),i)).id}catch(e){throw console.error("Error adding to wishlist:",e),Error("Failed to add item to wishlist")}}static async removeFromWishlist(e,t){try{let s=(0,a.P)((0,a.rJ)(r.db,this.collection),(0,a._M)("userId","==",e),(0,a._M)("productId","==",t)),i=await (0,a.GG)(s);i.empty||await (0,a.deleteDoc)((0,a.H9)(r.db,this.collection,i.docs[0].id))}catch(e){throw console.error("Error removing from wishlist:",e),Error("Failed to remove item from wishlist")}}static async getUserWishlist(e){try{let t=(0,a.P)((0,a.rJ)(r.db,this.collection),(0,a._M)("userId","==",e),(0,a.My)("addedAt","desc"));return(await (0,a.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){if(console.error("Error getting wishlist:",t),t instanceof Error&&t.message&&t.message.includes("index is currently building")){console.log("⚠️ Index still building, using fallback query...");try{let t=(0,a.P)((0,a.rJ)(r.db,this.collection),(0,a._M)("userId","==",e)),s=(await (0,a.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));return s.sort((e,t)=>{var s,a,r,i;let l=(null==(a=e.addedAt)||null==(s=a.toDate)?void 0:s.call(a))||new Date(0);return((null==(i=t.addedAt)||null==(r=i.toDate)?void 0:r.call(i))||new Date(0)).getTime()-l.getTime()}),console.log("✅ Found ".concat(s.length," wishlist items (fallback query)")),s}catch(e){console.error("Fallback query also failed:",e)}}throw Error("Failed to get wishlist")}}static async isInWishlist(e,t){try{let s=(0,a.P)((0,a.rJ)(r.db,this.collection),(0,a._M)("userId","==",e),(0,a._M)("productId","==",t));return!(await (0,a.GG)(s)).empty}catch(e){return console.error("Error checking wishlist status:",e),e instanceof Error&&e.message&&e.message.includes("index is currently building")&&console.log("⚠️ Index still building, returning false for wishlist status"),!1}}static async updateWishlistItem(e,t){try{let s=(0,a.H9)(r.db,this.collection,e);await (0,a.mZ)(s,{...t,lastPriceCheck:(0,a.serverTimestamp)()})}catch(e){throw console.error("Error updating wishlist item:",e),Error("Failed to update wishlist item")}}static async getWishlistCount(e){try{let t=(0,a.P)((0,a.rJ)(r.db,this.collection),(0,a._M)("userId","==",e));return(await (0,a.GG)(t)).size}catch(e){return console.error("Error getting wishlist count:",e),e instanceof Error&&e.message&&e.message.includes("index is currently building")&&console.log("⚠️ Index still building, returning 0 for wishlist count"),0}}static async toggleWishlistItem(e,t){try{if(await this.isInWishlist(e,t.id))return await this.removeFromWishlist(e,t.id),{added:!1};{let s=await this.addToWishlist(e,t);return{added:!0,itemId:s}}}catch(e){throw console.error("Error toggling wishlist item:",e),Error("Failed to toggle wishlist item")}}}i.collection="wishlist"},1243:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1264:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},1284:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},1976:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},2730:(e,t,s)=>{"use strict";s.d(t,{C:()=>l,e:()=>c});var a=s(5453),r=s(6786),i=s(2115);let l=(0,a.v)()((0,r.Zr)((e,t)=>({cart:[],addToCart:t=>{e(e=>{let s=Array.isArray(e.cart)?e.cart:[];return s.find(e=>e.productId===t.productId&&e.variantId===t.variantId)?{cart:s.map(e=>e.productId===t.productId&&e.variantId===t.variantId?{...e,quantity:e.quantity+t.quantity}:e)}:{cart:[...s,t]}})},removeFromCart:(t,s)=>{e(e=>({cart:(Array.isArray(e.cart)?e.cart:[]).filter(e=>e.productId!==t||e.variantId!==s)}))},updateCartQuantity:(t,s,a)=>{e(e=>({cart:(Array.isArray(e.cart)?e.cart:[]).map(e=>e.productId===t&&e.variantId===a?{...e,quantity:s}:e).filter(e=>e.quantity>0)}))},clearCart:()=>e({cart:[]}),isLoading:!1,setLoading:t=>e({isLoading:t}),theme:"light",setTheme:t=>e({theme:t}),checkoutForm:{email:"",name:"",phone:"",address:"",city:"",state:"",zipCode:""},updateCheckoutForm:t=>{e(e=>({checkoutForm:{...e.checkoutForm,...t}}))},getCartTotal:()=>{let{cart:e}=t();return(Array.isArray(e)?e:[]).reduce((e,t)=>e+t.price*t.quantity,0)},getCartItemCount:()=>{let{cart:e}=t();return(Array.isArray(e)?e:[]).reduce((e,t)=>e+t.quantity,0)}}),{name:"butterfly-authentique-store",partialize:e=>({cart:e.cart,theme:e.theme,checkoutForm:e.checkoutForm})})),c=()=>{let e=l(),[t,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{s(!0)},[]),t?e:{cart:[],addToCart:()=>{},removeFromCart:()=>{},updateCartQuantity:()=>{},clearCart:()=>{},isLoading:!1,setLoading:()=>{},theme:"light",setTheme:()=>{},checkoutForm:{email:"",name:"",phone:"",address:"",city:"",state:"",zipCode:""},updateCheckoutForm:()=>{},getCartTotal:()=>0,getCartItemCount:()=>0}}},3904:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4795:(e,t,s)=>{Promise.resolve().then(s.bind(s,940))},5196:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5339:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5684:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},8564:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9799:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])}},e=>{e.O(0,[9135,3965,6874,3568,4787,3063,9772,3999,8441,5964,7358],()=>e(e.s=4795)),_N_E=e.O()}]);