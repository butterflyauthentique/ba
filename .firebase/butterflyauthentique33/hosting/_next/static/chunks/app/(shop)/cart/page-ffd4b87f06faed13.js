(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5091],{2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2730:(e,t,r)=>{"use strict";r.d(t,{C:()=>o,e:()=>n});var a=r(5453),s=r(6786),c=r(2115);let o=(0,a.v)()((0,s.Zr)((e,t)=>({cart:[],addToCart:t=>{e(e=>{let r=Array.isArray(e.cart)?e.cart:[];return r.find(e=>e.productId===t.productId&&e.variantId===t.variantId)?{cart:r.map(e=>e.productId===t.productId&&e.variantId===t.variantId?{...e,quantity:e.quantity+t.quantity}:e)}:{cart:[...r,t]}})},removeFromCart:(t,r)=>{e(e=>({cart:(Array.isArray(e.cart)?e.cart:[]).filter(e=>e.productId!==t||e.variantId!==r)}))},updateCartQuantity:(t,r,a)=>{e(e=>({cart:(Array.isArray(e.cart)?e.cart:[]).map(e=>e.productId===t&&e.variantId===a?{...e,quantity:r}:e).filter(e=>e.quantity>0)}))},clearCart:()=>e({cart:[]}),isLoading:!1,setLoading:t=>e({isLoading:t}),theme:"light",setTheme:t=>e({theme:t}),checkoutForm:{email:"",name:"",phone:"",address:"",city:"",state:"",zipCode:""},updateCheckoutForm:t=>{e(e=>({checkoutForm:{...e.checkoutForm,...t}}))},getCartTotal:()=>{let{cart:e}=t();return(Array.isArray(e)?e:[]).reduce((e,t)=>e+t.price*t.quantity,0)},getCartItemCount:()=>{let{cart:e}=t();return(Array.isArray(e)?e:[]).reduce((e,t)=>e+t.quantity,0)}}),{name:"butterfly-authentique-store",partialize:e=>({cart:e.cart,theme:e.theme,checkoutForm:e.checkoutForm})})),n=()=>{let e=o(),[t,r]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{r(!0)},[]),t?e:{cart:[],addToCart:()=>{},removeFromCart:()=>{},updateCartQuantity:()=>{},clearCart:()=>{},isLoading:!1,setLoading:()=>{},theme:"light",setTheme:()=>{},checkoutForm:{email:"",name:"",phone:"",address:"",city:"",state:"",zipCode:""},updateCheckoutForm:()=>{},getCartTotal:()=>0,getCartItemCount:()=>0}}},4163:(e,t,r)=>{Promise.resolve().then(r.bind(r,9057))},5169:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6104:(e,t,r)=>{"use strict";r.d(t,{IG:()=>m,_f:()=>h,db:()=>u,j2:()=>i,jU:()=>g});var a=r(3915),s=r(5404),c=r(5317),o=r(7505),n=r(9434);let d={apiKey:"AIzaSyBTZwEHiG_KmjmZY1wXW3Xane8F4pUqq_E",authDomain:"butterflyauthentique33.firebaseapp.com",projectId:"butterflyauthentique33",storageBucket:"butterflyauthentique33.firebasestorage.app",messagingSenderId:"147808797895",appId:"1:147808797895:web:5013c06442c7063f796ae2",measurementId:r(9509).env.NEXT_PUBLIC_GA_MEASUREMENT_ID},l=0===(0,a.Dk)().length?(0,a.Wp)(d):(0,a.Dk)()[0],i=(0,s.xI)(l),u=(0,c.aU)(l),m=(0,o.c7)(l);console.log("Firebase Config:",{projectId:d.projectId,authDomain:d.authDomain,storageBucket:d.storageBucket});let h={products:(0,c.rJ)(u,"products"),categories:(0,c.rJ)(u,"categories"),users:(0,c.rJ)(u,"users"),orders:(0,c.rJ)(u,"orders"),cart:(0,c.rJ)(u,"cart"),blog:(0,c.rJ)(u,"blog"),reviews:(0,c.rJ)(u,"reviews"),addresses:(0,c.rJ)(u,"addresses"),settings:(0,c.rJ)(u,"settings"),admins:(0,c.rJ)(u,"admins")},g={async create(e){try{console.log("\uD83D\uDE80 Creating new product...");let t=(0,c.H9)((0,c.rJ)(u,"temp")).id;console.log("Generated product ID:",t);let r=e.slug||(0,n.SV)(e.name,t);console.log("Generated slug:",r);let a={...e,id:t,slug:r,viewCount:0,purchaseCount:0,rating:0,reviews:0,createdAt:c.Dc.now(),updatedAt:c.Dc.now()};return console.log("\uD83D\uDCBE Saving to Firestore..."),await (0,c.setDoc)((0,c.H9)(h.products,t),a),console.log("✅ Product created successfully!"),a}catch(e){throw console.error("❌ Error creating product:",e),e}},async getById(e){try{console.log("\uD83D\uDD0D Getting product by ID or slug:",e);let t=(0,c.H9)(h.products,e),r=await (0,c.x7)(t);if(r.exists())return console.log("✅ Product found by ID"),{id:r.id,...r.data()};console.log("\uD83D\uDD0D Product not found by ID, searching by slug...");let a=(0,c.P)(h.products,(0,c._M)("slug","==",e),(0,c.AB)(1)),s=await (0,c.GG)(a);if(!s.empty){let e=s.docs[0];return console.log("✅ Product found by slug"),{id:e.id,...e.data()}}return console.log("❌ Product not found by ID or slug"),null}catch(e){return console.error("❌ Error getting product:",e),null}},async getAll(){try{console.log("\uD83D\uDD0D Getting all products...");let e=(0,c.P)(h.products,(0,c.My)("createdAt","desc")),t=await (0,c.GG)(e);return console.log("✅ Found ".concat(t.docs.length," products")),t.docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("❌ Error getting products:",e),[]}},async update(e,t){try{console.log("\uD83D\uDD04 Updating product:",e);let r=(0,c.H9)(h.products,e);await (0,c.setDoc)(r,{...t,updatedAt:c.Dc.now()},{merge:!0}),console.log("✅ Product updated successfully")}catch(e){throw console.error("❌ Error updating product:",e),e}},async delete(e){try{console.log("\uD83D\uDDD1️ Deleting product:",e),await (0,c.setDoc)((0,c.H9)(h.products,e),{}),console.log("✅ Product deleted successfully")}catch(e){throw console.error("❌ Error deleting product:",e),e}}}},9057:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(2115),c=r(6874),o=r.n(c),n=r(6766),d=r(6151),l=r(5169),i=r(2525),u=r(7712),m=r(4616),h=r(2138),g=r(2730),p=r(6104),x=r(3568);function y(){let{cart:e,updateCartQuantity:t,removeFromCart:r}=(0,g.C)(),[c,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)([]),[b,v]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{v(!0);let e=await p.jU.getAll();j(e)}catch(e){console.error("Error fetching products for cart:",e),x.Ay.error("Failed to load product information")}finally{v(!1)}})()},[]);let N=Object.values((e||[]).reduce((e,t)=>{let r="".concat(t.productId,"-").concat(t.variantId||"default");return e[r]?e[r].totalQuantity+=t.quantity:e[r]={...t,totalQuantity:t.quantity},e},{})),w=N.length>0,I=N.reduce((e,t)=>{let r=f.find(e=>e.id===t.productId);return e+((null==r?void 0:r.price)||0)*t.totalQuantity},0),C=I>0?I>=5e3?0:200:0,A=I+C,k=(e,r,a)=>{r<1||t(e,r,a)},S=(e,t)=>{r(e,t)};return b?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"container py-16",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-6"}),(0,a.jsx)("h1",{className:"font-secondary text-2xl font-bold text-gray-900 mb-4",children:"Loading Cart..."}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please wait while we load your cart items."})]})})}):w?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"container py-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(o(),{href:"/shop",className:"btn-icon flex items-center justify-center",children:(0,a.jsx)(l.A,{className:"w-5 h-5"})}),(0,a.jsx)("h1",{className:"font-secondary text-3xl font-bold text-gray-900",children:"Shopping Cart"}),(0,a.jsxs)("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:[N.length," ",1===N.length?"item":"items"]})]})})}),(0,a.jsx)("div",{className:"container py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"font-secondary text-xl font-bold text-gray-900",children:"Cart Items"})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:N.map((e,t)=>{var r;let s=f.find(t=>t.id===e.productId);if(!s)return console.warn("Product not found for cart item: ".concat(e.productId)),(0,a.jsx)("div",{className:"p-6 border-l-4 border-red-500 bg-red-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-700 font-medium",children:"Product not found"}),(0,a.jsxs)("p",{className:"text-red-600 text-sm",children:["Product ID: ",e.productId]})]}),(0,a.jsx)("button",{onClick:()=>S(e.productId,e.variantId),className:"text-red-600 hover:text-red-700 transition-colors",title:"Remove item",children:(0,a.jsx)(i.A,{className:"w-5 h-5"})})]})},"missing-".concat(e.productId,"-").concat(t));let c="".concat(e.productId,"-").concat(e.variantId||"default","-").concat(t);return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden",children:(0,a.jsx)(n.default,{src:Array.isArray(s.images)&&s.images.length>0?"string"==typeof s.images[0]?s.images[0]:(null==(r=s.images[0])?void 0:r.url)||"/logo.png":"/logo.png",alt:s.name,width:96,height:96,className:"w-full h-full object-cover rounded-lg"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:s.name}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[(0,a.jsx)("button",{onClick:()=>k(e.productId,e.totalQuantity-1,e.variantId),className:"p-2 hover:bg-gray-50 transition-colors",disabled:e.totalQuantity<=1,children:(0,a.jsx)(u.A,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"px-4 py-2 text-sm font-medium min-w-[3rem] text-center",children:e.totalQuantity}),(0,a.jsx)("button",{onClick:()=>k(e.productId,e.totalQuantity+1,e.variantId),className:"p-2 hover:bg-gray-50 transition-colors",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-900",children:["₹",(s.price*e.totalQuantity).toLocaleString()]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["₹",s.price.toLocaleString()," each"]})]})]}),(0,a.jsx)("button",{onClick:()=>S(e.productId,e.variantId),className:"text-red-600 hover:text-red-700 transition-colors",title:"Remove item",children:(0,a.jsx)(i.A,{className:"w-5 h-5"})})]})]})]})},c)})})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,a.jsx)("h2",{className:"font-secondary text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal (GST Included)"}),(0,a.jsxs)("span",{className:"font-medium",children:["₹",I.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,a.jsx)("span",{className:"font-medium",children:0===C?"Free":"₹".concat(C.toLocaleString())})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-lg",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["₹",A.toLocaleString()]})]})})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center mb-4",children:"* All prices include 18% GST"}),I>0&&I<5e3&&(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:["Add ₹",(5e3-I).toLocaleString()," more to get free shipping!"]})}),(0,a.jsxs)(o(),{href:"/checkout",className:"btn-primary w-full flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{children:"Proceed to Checkout"}),(0,a.jsx)(h.A,{className:"w-5 h-5"})]}),(0,a.jsxs)("div",{className:"relative my-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"bg-white px-2 text-gray-500",children:"or"})})]}),(0,a.jsx)(o(),{href:"/shop",className:"btn-secondary w-full flex items-center justify-center",children:"Continue Shopping"})]})})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"container py-16",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.A,{className:"w-24 h-24 text-gray-400 mx-auto mb-6"}),(0,a.jsx)("h1",{className:"font-secondary text-3xl font-bold text-gray-900 mb-4",children:"Your Cart is Empty"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-8 max-w-md mx-auto",children:"Looks like you haven't added any items to your cart yet. Start shopping to discover our beautiful collection!"}),(0,a.jsx)(o(),{href:"/shop",className:"btn-primary",children:"Continue Shopping"})]})})})}},9434:(e,t,r)=>{"use strict";function a(e,t){let r=e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"").substring(0,100),a=t.substring(0,8);return"".concat(r,"-").concat(a)}function s(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function c(e){return/^[6-9]\d{9}$/.test(e.replace(/\D/g,""))}r.d(t,{B9:()=>s,BH:()=>c,SV:()=>a,k0:()=>o});let o=e=>new Promise((t,r)=>{if(document.querySelector('script[src="'.concat(e,'"]')))return void t();let a=document.createElement("script");a.src=e,a.async=!0,a.onload=()=>t(),a.onerror=()=>r(Error("Failed to load script: ".concat(e))),document.head.appendChild(a)})}},e=>{e.O(0,[9135,3965,6874,3568,4787,3063,9772,8441,5964,7358],()=>e(e.s=4163)),_N_E=e.O()}]);